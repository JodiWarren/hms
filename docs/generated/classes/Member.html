<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
<meta charset="utf-8">
<title>HMS - The Hackspace Management System » \Member</title>
<meta name="author" content="Mike van Riel">
<meta name="description" content="">
<link href="../css/template.css" rel="stylesheet" media="all">
<script src="../js/jquery-1.7.1.min.js" type="text/javascript"></script><script src="../js/jquery-ui-1.8.2.custom.min.js" type="text/javascript"></script><script src="../js/jquery.mousewheel.min.js" type="text/javascript"></script><script src="../js/bootstrap.js" type="text/javascript"></script><script src="../js/template.js" type="text/javascript"></script><script src="../js/prettify/prettify.min.js" type="text/javascript"></script><link rel="shortcut icon" href="../img/favicon.ico">
<link rel="apple-touch-icon" href="../img/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="72x72" href="../img/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="../img/apple-touch-icon-114x114.png">
</head>
<body>
<div class="navbar navbar-fixed-top">
<div class="navbar-inner"><div class="container">
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a><a class="brand" href="../index.html">HMS - The Hackspace Management System</a><div class="nav-collapse"><ul class="nav">
<li class="dropdown">
<a href="#api" class="dropdown-toggle" data-toggle="dropdown">
                                    API Documentation <b class="caret"></b></a><ul class="dropdown-menu">
<li><a>Packages</a></li>
<li><a href="../packages/app.Console.Command.html"><i class="icon-folder-open"></i> app.Console.Command</a></li>
<li><a href="../packages/app.Controller.html"><i class="icon-folder-open"></i> app.Controller</a></li>
<li><a href="../packages/app.Controller.Component.html"><i class="icon-folder-open"></i> app.Controller.Component</a></li>
<li><a href="../packages/app.Controller.Component.Auth.html"><i class="icon-folder-open"></i> app.Controller.Component.Auth</a></li>
<li><a href="../packages/app.Lib.AutomationDriver.html"><i class="icon-folder-open"></i> app.Lib.AutomationDriver</a></li>
<li><a href="../packages/app.Lib.CsvReader.html"><i class="icon-folder-open"></i> app.Lib.CsvReader</a></li>
<li><a href="../packages/app.Lib.Error.Exception.html"><i class="icon-folder-open"></i> app.Lib.Error.Exception</a></li>
<li><a href="../packages/app.Lib.Krb.html"><i class="icon-folder-open"></i> app.Lib.Krb</a></li>
<li><a href="../packages/app.Lib.MailChimp.html"><i class="icon-folder-open"></i> app.Lib.MailChimp</a></li>
<li><a href="../packages/app.Model.html"><i class="icon-folder-open"></i> app.Model</a></li>
<li><a href="../packages/app.Model.Behavior.html"><i class="icon-folder-open"></i> app.Model.Behavior</a></li>
<li><a href="../packages/app.View.Helper.html"><i class="icon-folder-open"></i> app.View.Helper</a></li>
<li><a href="../packages/dev.Setup.html"><i class="icon-folder-open"></i> dev.Setup</a></li>
<li><a href="../packages/dev.Setup.Cmd.html"><i class="icon-folder-open"></i> dev.Setup.Cmd</a></li>
<li><a href="../packages/dev.Setup.Lib.html"><i class="icon-folder-open"></i> dev.Setup.Lib</a></li>
<li><a href="../packages/dev.Setup.Web.html"><i class="icon-folder-open"></i> dev.Setup.Web</a></li>
<li><a href="../packages/plugins.MemberVoice.Controller.html"><i class="icon-folder-open"></i> plugins.MemberVoice.Controller</a></li>
<li><a href="../packages/plugins.MemberVoice.Model.html"><i class="icon-folder-open"></i> plugins.MemberVoice.Model</a></li>
</ul>
</li>
<li class="dropdown" id="charts-menu">
<a href="#charts" class="dropdown-toggle" data-toggle="dropdown">
                                    Charts <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="../graph_class.html"><i class="icon-list-alt"></i> Class hierarchy diagram</a></li></ul>
</li>
<li class="dropdown" id="reports-menu">
<a href="#reports" class="dropdown-toggle" data-toggle="dropdown">
                                    Reports <b class="caret"></b></a><ul class="dropdown-menu">
<li><a href="../errors.html"><i class="icon-remove-sign"></i> Errors 
                <span class="label label-info">0</span></a></li>
<li><a href="../markers.html"><i class="icon-map-marker"></i> Markers 
                <ul></ul></a></li>
<li><a href="../deprecated.html"><i class="icon-stop"></i> Deprecated elements 
                <span class="label label-info">0</span></a></li>
</ul>
</li>
</ul></div>
</div></div>
<div class="go_to_top"><a href="#___" style="color: inherit">Back to top  <i class="icon-upload icon-white"></i></a></div>
</div>
<div id="___" class="container">
<noscript><div class="alert alert-warning">
                            Javascript is disabled; several features are only available
                            if Javascript is enabled.
                        </div></noscript>
<div class="row">
<div class="span4">
<div class="btn-toolbar">
<div class="btn-group visibility" data-toggle="buttons-checkbox">
<button class="btn public active" title="Show public elements">Public</button><button class="btn protected" title="Show protected elements">Protected</button><button class="btn private" title="Show private elements">Private</button><button class="btn inherited active" title="Show inherited elements">Inherited</button>
</div>
<div class="btn-group view pull-right" data-toggle="buttons-radio">
<button class="btn details" title="Show descriptions and method names"><i class="icon-list"></i></button><button class="btn simple" title="Show only method names"><i class="icon-align-justify"></i></button>
</div>
</div>
<ul class="side-nav nav nav-list">
<li class="nav-header">
<i title="Methods" class="icon-custom icon-method"></i> Methods
                    <ul>
<li class="method public "><a href="#method_acceptDetails" title="acceptDetails() :: Mark a members details as valid."><span class="description">Mark a members details as valid.</span><pre>acceptDetails()</pre></a></li>
<li class="method public "><a href="#method_addEmailMustMatch" title="addEmailMustMatch() :: Add an extra validation rule to the e-mail field stating that the user supplied e-mail must match what's in the database."><span class="description">Add an extra validation rule to the e-mail field stating that the user supplied e-mail must match what's in the database.</span><pre>addEmailMustMatch()</pre></a></li>
<li class="method public "><a href="#method_approveMember" title="approveMember() :: Approve a member, making them a current member."><span class="description">Approve a member, making them a current member.</span><pre>approveMember()</pre></a></li>
<li class="method public "><a href="#method_beforeSave" title="beforeSave() :: Actions to perform before saving any data"><span class="description">Actions to perform before saving any data</span><pre>beforeSave()</pre></a></li>
<li class="method public "><a href="#method_changePassword" title="changePassword() :: Change a users password."><span class="description">Change a users password.</span><pre>changePassword()</pre></a></li>
<li class="method public "><a href="#method_checkEmailMatch" title="checkEmailMatch() :: Validation function to see if the user-supplied email matches what's in the database."><span class="description">Validation function to see if the user-supplied email matches what's in the database.</span><pre>checkEmailMatch()</pre></a></li>
<li class="method public "><a href="#method_checkUniqueUsername" title="checkUniqueUsername() :: Validation function to see if the user-supplied username is already taken."><span class="description">Validation function to see if the user-supplied username is already taken.</span><pre>checkUniqueUsername()</pre></a></li>
<li class="method public "><a href="#method_completeForgotPassword" title="completeForgotPassword() :: Complete a forgot password request"><span class="description">Complete a forgot password request</span><pre>completeForgotPassword()</pre></a></li>
<li class="method public "><a href="#method_createForgotPassword" title="createForgotPassword() :: Generate a forgot password request from an e-mail."><span class="description">Generate a forgot password request from an e-mail.</span><pre>createForgotPassword()</pre></a></li>
<li class="method public "><a href="#method_createNewMemberInfo" title="createNewMemberInfo() :: Create a member info array for a new member."><span class="description">Create a member info array for a new member.</span><pre>createNewMemberInfo()</pre></a></li>
<li class="method public "><a href="#method_doesMemberExistWithEmail" title="doesMemberExistWithEmail() :: Find out if we have record of a Member with a specific e-mail address."><span class="description">Find out if we have record of a Member with a specific e-mail address.</span><pre>doesMemberExistWithEmail()</pre></a></li>
<li class="method public "><a href="#method_emailToMemberId" title="emailToMemberId() :: Given either a single e-mail or an array of e-mails, return a member id or array of member ids."><span class="description">Given either a single e-mail or an array of e-mails, return a member id or array of member ids.</span><pre>emailToMemberId()</pre></a></li>
<li class="method public "><a href="#method_formatMemberInfo" title="formatMemberInfo() :: Format member information into a nicer arrangement."><span class="description">Format member information into a nicer arrangement.</span><pre>formatMemberInfo()</pre></a></li>
<li class="method public "><a href="#method_formatMemberInfoList" title="formatMemberInfoList() :: Format an array of member infos."><span class="description">Format an array of member infos.</span><pre>formatMemberInfoList()</pre></a></li>
<li class="method public "><a href="#method_getApproveDetails" title="getApproveDetails() :: Get a members name, email and pin."><span class="description">Get a members name, email and pin.</span><pre>getApproveDetails()</pre></a></li>
<li class="method public "><a href="#method_getBestMemberNames" title="getBestMemberNames() :: Get a list of member names or e-mails (if we don't have their name) for all members."><span class="description">Get a list of member names or e-mails (if we don't have their name) for all members.</span><pre>getBestMemberNames()</pre></a></li>
<li class="method public "><a href="#method_getCount" title="getCount() :: Find out how many member records exist in the database."><span class="description">Find out how many member records exist in the database.</span><pre>getCount()</pre></a></li>
<li class="method public "><a href="#method_getCountForStatus" title="getCountForStatus() :: Find how many members have a certain Status."><span class="description">Find how many members have a certain Status.</span><pre>getCountForStatus()</pre></a></li>
<li class="method public "><a href="#method_getEmailForMember" title="getEmailForMember() :: Get the email for a member, may hit the database."><span class="description">Get the email for a member, may hit the database.</span><pre>getEmailForMember()</pre></a></li>
<li class="method public "><a href="#method_getEmailsForAllMembers" title="getEmailsForAllMembers() :: Get a list of e-mail addresses for all members."><span class="description">Get a list of e-mail addresses for all members.</span><pre>getEmailsForAllMembers()</pre></a></li>
<li class="method public "><a href="#method_getEmailsForMembersInGroup" title="getEmailsForMembersInGroup() :: Get a list of e-mail addresses for all members in a Group."><span class="description">Get a list of e-mail addresses for all members in a Group.</span><pre>getEmailsForMembersInGroup()</pre></a></li>
<li class="method public "><a href="#method_getIdForMember" title="getIdForMember() :: Get the Status for a member, may hit the database."><span class="description">Get the Status for a member, may hit the database.</span><pre>getIdForMember()</pre></a></li>
<li class="method public "><a href="#method_getMailingList" title="getMailingList() :: Get a MailingList model."><span class="description">Get a MailingList model.</span><pre>getMailingList()</pre></a></li>
<li class="method public "><a href="#method_getMemberSummaryAll" title="getMemberSummaryAll() :: Get a summary of the member records for all members."><span class="description">Get a summary of the member records for all members.</span><pre>getMemberSummaryAll()</pre></a></li>
<li class="method public "><a href="#method_getMemberSummaryForAccountIds" title="getMemberSummaryForAccountIds() :: Get a summary of the member records for all members with an account id that is in the list passed in."><span class="description">Get a summary of the member records for all members with an account id that is in the list passed in.</span><pre>getMemberSummaryForAccountIds()</pre></a></li>
<li class="method public "><a href="#method_getMemberSummaryForMember" title="getMemberSummaryForMember() :: Get a summary of the member records for a specific member."><span class="description">Get a summary of the member records for a specific member.</span><pre>getMemberSummaryForMember()</pre></a></li>
<li class="method public "><a href="#method_getMemberSummaryForMembers" title="getMemberSummaryForMembers() :: Get a summary of the member records for a list of members."><span class="description">Get a summary of the member records for a list of members.</span><pre>getMemberSummaryForMembers()</pre></a></li>
<li class="method public "><a href="#method_getMemberSummaryForSearchQuery" title="getMemberSummaryForSearchQuery() :: Get a summary of the member records for all member records where their name, email or username is similar to the keyword."><span class="description">Get a summary of the member records for all member records where their name, email or username is similar to the keyword.</span><pre>getMemberSummaryForSearchQuery()</pre></a></li>
<li class="method public "><a href="#method_getMemberSummaryForStatus" title="getMemberSummaryForStatus() :: Get a summary of the member records for all members with a certain status."><span class="description">Get a summary of the member records for all members with a certain status.</span><pre>getMemberSummaryForStatus()</pre></a></li>
<li class="method public "><a href="#method_getReadableAccountList" title="getReadableAccountList() :: Get a list of account and member details that is suitable for populating a drop-down box"><span class="description">Get a list of account and member details that is suitable for populating a drop-down box</span><pre>getReadableAccountList()</pre></a></li>
<li class="method public "><a href="#method_getSoDetails" title="getSoDetails() :: Get a members name, email and payment ref."><span class="description">Get a members name, email and payment ref.</span><pre>getSoDetails()</pre></a></li>
<li class="method public "><a href="#method_getStatusForMember" title="getStatusForMember() :: Get the Status for a member, may hit the database."><span class="description">Get the Status for a member, may hit the database.</span><pre>getStatusForMember()</pre></a></li>
<li class="method public "><a href="#method_getUsernameForMember" title="getUsernameForMember() :: Get the username for a member, may hit the database."><span class="description">Get the username for a member, may hit the database.</span><pre>getUsernameForMember()</pre></a></li>
<li class="method public "><a href="#method_passwordConfirmMatchesPassword" title="passwordConfirmMatchesPassword() :: Validation function to see if the user-supplied password and password confirmation match."><span class="description">Validation function to see if the user-supplied password and password confirmation match.</span><pre>passwordConfirmMatchesPassword()</pre></a></li>
<li class="method public "><a href="#method_registerMember" title="registerMember() :: Attempt to register a new member record."><span class="description">Attempt to register a new member record.</span><pre>registerMember()</pre></a></li>
<li class="method public "><a href="#method_reinstateMembership" title="reinstateMembership() :: Reinstate an ex-members membership."><span class="description">Reinstate an ex-members membership.</span><pre>reinstateMembership()</pre></a></li>
<li class="method public "><a href="#method_rejectDetails" title="rejectDetails() :: Mark a members contact details as invalid."><span class="description">Mark a members contact details as invalid.</span><pre>rejectDetails()</pre></a></li>
<li class="method public "><a href="#method_removeEmailMustMatch" title="removeEmailMustMatch() :: Remove the 'e-mail must match' validation rule."><span class="description">Remove the 'e-mail must match' validation rule.</span><pre>removeEmailMustMatch()</pre></a></li>
<li class="method public "><a href="#method_revokeMembership" title="revokeMembership() :: Revoke a members membership."><span class="description">Revoke a members membership.</span><pre>revokeMembership()</pre></a></li>
<li class="method public "><a href="#method_sanitiseMemberInfo" title="sanitiseMemberInfo() :: Sanitise an array of member info, removing certain fields."><span class="description">Sanitise an array of member info, removing certain fields.</span><pre>sanitiseMemberInfo()</pre></a></li>
<li class="method public "><a href="#method_setupDetails" title="setupDetails() :: Attempt to set-up contact details for a member."><span class="description">Attempt to set-up contact details for a member.</span><pre>setupDetails()</pre></a></li>
<li class="method public "><a href="#method_setupLogin" title="setupLogin() :: Attempt to set-up login details for a member."><span class="description">Attempt to set-up login details for a member.</span><pre>setupLogin()</pre></a></li>
<li class="method public "><a href="#method_updateDetails" title="updateDetails() :: Update all the updatable info for a member."><span class="description">Update all the updatable info for a member.</span><pre>updateDetails()</pre></a></li>
<li class="method public "><a href="#method_validateEmail" title="validateEmail() :: Validate that e-mail data is ok."><span class="description">Validate that e-mail data is ok.</span><pre>validateEmail()</pre></a></li>
</ul>
</li>
<li class="nav-header private">» Private
                    <ul>
<li class="method private "><a href="#method___getMemberSummary" title="__getMemberSummary() :: Get a summary of the member records for all members that match the conditions."><span class="description">Get a summary of the member records for all members that match the conditions.</span><pre>__getMemberSummary()</pre></a></li>
<li class="method private "><a href="#method___saveMemberData" title="__saveMemberData() :: Create or save a member record, and all associated data."><span class="description">Create or save a member record, and all associated data.</span><pre>__saveMemberData()</pre></a></li>
<li class="method private "><a href="#method___setMemberStatus" title="__setMemberStatus() :: Set a members member_status."><span class="description">Set a members member_status.</span><pre>__setMemberStatus()</pre></a></li>
<li class="method private "><a href="#method___setPassword" title="__setPassword() :: Set the password for the member, with the option to create a new password entry if needed."><span class="description">Set the password for the member, with the option to create a new password entry if needed.</span><pre>__setPassword()</pre></a></li>
</ul>
</li>
<li class="nav-header">
<i title="Properties" class="icon-custom icon-property"></i> Properties
                    <ul>
<li class="property public "><a href="#property_actsAs" title="$actsAs() :: Specify the behavors we implement"><span class="description"></span><pre>$actsAs</pre></a></li>
<li class="property public "><a href="#property_belongsTo" title="$belongsTo() :: Specify our 'belongs to' associations"><span class="description"></span><pre>$belongsTo</pre></a></li>
<li class="property public "><a href="#property_hasAndBelongsToMany" title="$hasAndBelongsToMany() :: Has and belongs to many (HABTM) associations"><span class="description"></span><pre>$hasAndBelongsToMany</pre></a></li>
<li class="property public "><a href="#property_hasMany" title="$hasMany() :: Specify our 'has many' associations"><span class="description"></span><pre>$hasMany</pre></a></li>
<li class="property public "><a href="#property_mailingList" title="$mailingList() :: MailingList object, for easy mocking"><span class="description"></span><pre>$mailingList</pre></a></li>
<li class="property public "><a href="#property_primaryKey" title="$primaryKey() :: Specify the primary key."><span class="description"></span><pre>$primaryKey</pre></a></li>
<li class="property public "><a href="#property_validate" title="$validate() :: Validation rules."><span class="description"></span><pre>$validate</pre></a></li>
</ul>
</li>
<li class="nav-header">
<i title="Constants" class="icon-custom icon-constant"></i> Constants
                    <ul>
<li class="constant  "><a href="#constant_INITAL_CREDIT_LIMIT" title="INITAL_CREDIT_LIMIT() :: Initial credit limit, in pence."><span class="description">Initial credit limit, in pence.</span><pre>INITAL_CREDIT_LIMIT</pre></a></li>
<li class="constant  "><a href="#constant_MIN_PASSWORD_LENGTH" title="MIN_PASSWORD_LENGTH() :: The minimum length passwords must be."><span class="description">The minimum length passwords must be.</span><pre>MIN_PASSWORD_LENGTH</pre></a></li>
</ul>
</li>
</ul>
</div>
<div class="span8">
<a id="\Member"></a><ul class="breadcrumb">
<li>
<a href="../index.html"><i title="Classes" class="icon-custom icon-class"></i></a><span class="divider">\</span>
</li>
<li class="active">
<span class="divider">\</span><a href="../classes/Member.html">Member</a>
</li>
</ul>
<div class="element class">
<p class="short_description">Model for all member data</p>
<div class="details">
<div class="long_description"></div>
<h3>
<i title="Methods" class="icon-custom icon-method"></i> Methods</h3>
<a id="method_acceptDetails"></a><div class="element clickable method public method_acceptDetails" data-toggle="collapse" data-target=".method_acceptDetails .collapse" title="public">
<h2>Mark a members details as valid.</h2>
<pre>acceptDetails(int $memberId, array $data, int $adminId) : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$memberId</h4>
<code>int</code><p>The id of the member who's details we want to mark as valid.</p></div>
<div class="subelement argument">
<h4>$data</h4>
<code>array</code><p>The account data to use.</p></div>
<div class="subelement argument">
<h4>$adminId</h4>
<code>int</code><p>The id of the member admin who's accepting the details.</p></div>
<h3>Exceptions</h3>
<table class="table table-bordered"><tr>
<th><code><a href="../classes/InvalidStatusException.html">\InvalidStatusException</a></code></th>
<td>if the member is not a pre-member stage 2.</td>
</tr></table>
<h3>Returns</h3>
<div class="subelement response">
<code>mixed</code>Array of member details on success, or null on failure.</div>
</div></div>
</div>
<a id="method_addEmailMustMatch"></a><div class="element clickable method public method_addEmailMustMatch" data-toggle="collapse" data-target=".method_addEmailMustMatch .collapse" title="public">
<h2>Add an extra validation rule to the e-mail field stating that the user supplied e-mail must match what's in the database.</h2>
<pre>addEmailMustMatch() </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<table class="table table-bordered">
<tr>
<th>link</th>
<td><a href="Member::checkEmailMatch()">Member::checkEmailMatch()</a></td>
</tr>
<tr>
<th>link</th>
<td><a href="Member::removeEmailMustMatch()">Member::removeEmailMustMatch()</a></td>
</tr>
</table>
</div></div>
</div>
<a id="method_approveMember"></a><div class="element clickable method public method_approveMember" data-toggle="collapse" data-target=".method_approveMember .collapse" title="public">
<h2>Approve a member, making them a current member.</h2>
<pre>approveMember(int $memberId, int $adminId) : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$memberId</h4>
<code>int</code><p>The id of the member to approve.</p></div>
<div class="subelement argument">
<h4>$adminId</h4>
<code>int</code><p>The id of the member admin who is approving the member.</p></div>
<h3>Exceptions</h3>
<table class="table table-bordered"><tr>
<th><code><a href="../classes/InvalidStatusException.html">\InvalidStatusException</a></code></th>
<td>if the member is not a pre-member stage 3.</td>
</tr></table>
<h3>Returns</h3>
<div class="subelement response">
<code>mixed</code>Array of member details on success, or null on failure.</div>
</div></div>
</div>
<a id="method_beforeSave"></a><div class="element clickable method public method_beforeSave" data-toggle="collapse" data-target=".method_beforeSave .collapse" title="public">
<h2>Actions to perform before saving any data</h2>
<pre>beforeSave(array $options<code> = array()</code>) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<table class="table table-bordered"><tr>
<th>link</th>
<td><a href="http://book.cakephp.org/2.0/en/models/callback-methods.html#beforesave">http://book.cakephp.org/2.0/en/models/callback-methods.html#beforesave</a></td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$options</h4>
<code>array</code><p>Any options that were passed to the Save method</p></div>
</div></div>
</div>
<a id="method_changePassword"></a><div class="element clickable method public method_changePassword" data-toggle="collapse" data-target=".method_changePassword .collapse" title="public">
<h2>Change a users password.</h2>
<pre>changePassword(int $memberId, int $adminId, array $data) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$memberId</h4>
<code>int</code><p>The id of the member whose password is being changed.</p></div>
<div class="subelement argument">
<h4>$adminId</h4>
<code>int</code><p>The id of the member who is changing the password.</p></div>
<div class="subelement argument">
<h4>$data</h4>
<code>array</code><p>The array of password data.</p></div>
<h3>Exceptions</h3>
<table class="table table-bordered">
<tr>
<th><code><a href="../classes/InvalidStatusException.html">\InvalidStatusException</a></code></th>
<td>if the member is a prospective member.</td>
</tr>
<tr>
<th><code><a href="../classes/NotAuthorizedException.html">\NotAuthorizedException</a></code></th>
<td>if the member specified by $adminId doesn't have permission to do this.</td>
</tr>
</table>
</div></div>
</div>
<a id="method_checkEmailMatch"></a><div class="element clickable method public method_checkEmailMatch" data-toggle="collapse" data-target=".method_checkEmailMatch .collapse" title="public">
<h2>Validation function to see if the user-supplied email matches what's in the database.</h2>
<pre>checkEmailMatch(array $check) : bool</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<table class="table table-bordered">
<tr>
<th>link</th>
<td><a href="Member::addEmailMustMatch()">Member::addEmailMustMatch()</a></td>
</tr>
<tr>
<th>link</th>
<td><a href="Member::removeEmailMustMatch()">Member::removeEmailMustMatch()</a></td>
</tr>
</table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$check</h4>
<code>array</code><p>The email to check.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>bool</code>True if the supplied email value matches the database, otherwise false.</div>
</div></div>
</div>
<a id="method_checkUniqueUsername"></a><div class="element clickable method public method_checkUniqueUsername" data-toggle="collapse" data-target=".method_checkUniqueUsername .collapse" title="public">
<h2>Validation function to see if the user-supplied username is already taken.</h2>
<pre>checkUniqueUsername(array $check) : bool</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$check</h4>
<code>array</code><p>The username to check.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>bool</code>True if the supplied username exists in the database (case-insensitive) registered to a different user, otherwise false.</div>
</div></div>
</div>
<a id="method_completeForgotPassword"></a><div class="element clickable method public method_completeForgotPassword" data-toggle="collapse" data-target=".method_completeForgotPassword .collapse" title="public">
<h2>Complete a forgot password request</h2>
<pre>completeForgotPassword(string $guid, array $data) : bool</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$guid</h4>
<code>string</code><p>The id of the forgot password request.</p></div>
<div class="subelement argument">
<h4>$data</h4>
<code>array</code><p>Array of data containing the user submitted e-mail.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>bool</code>True if password was changed, false otherwise.</div>
</div></div>
</div>
<a id="method_createForgotPassword"></a><div class="element clickable method public method_createForgotPassword" data-toggle="collapse" data-target=".method_createForgotPassword .collapse" title="public">
<h2>Generate a forgot password request from an e-mail.</h2>
<pre>createForgotPassword(array $data) : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$data</h4>
<code>array</code><p>Array of data containing the user submitted e-mail.</p></div>
<h3>Exceptions</h3>
<table class="table table-bordered"><tr>
<th><code><a href="../classes/InvalidStatusException.html">\InvalidStatusException</a></code></th>
<td>if the member is a prospective member.</td>
</tr></table>
<h3>Returns</h3>
<div class="subelement response">
<code>mixed</code>An array of id and email data if creation succeeded, false otherwise.</div>
</div></div>
</div>
<a id="method_createNewMemberInfo"></a><div class="element clickable method public method_createNewMemberInfo" data-toggle="collapse" data-target=".method_createNewMemberInfo .collapse" title="public">
<h2>Create a member info array for a new member.</h2>
<pre>createNewMemberInfo(string $email) : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$email</h4>
<code>string</code><p>The e-mail address for the new member.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>array</code>An array of member info suitable for saving.</div>
</div></div>
</div>
<a id="method_doesMemberExistWithEmail"></a><div class="element clickable method public method_doesMemberExistWithEmail" data-toggle="collapse" data-target=".method_doesMemberExistWithEmail .collapse" title="public">
<h2>Find out if we have record of a Member with a specific e-mail address.</h2>
<pre>doesMemberExistWithEmail(string $email) : bool</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$email</h4>
<code>string</code><p>E-mail address to check.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>bool</code>True if there is a Member with this e-mail, false otherwise.</div>
</div></div>
</div>
<a id="method_emailToMemberId"></a><div class="element clickable method public method_emailToMemberId" data-toggle="collapse" data-target=".method_emailToMemberId .collapse" title="public">
<h2>Given either a single e-mail or an array of e-mails, return a member id or array of member ids.</h2>
<pre>emailToMemberId(mixed $email) : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$email</h4>
<code>mixed</code><p>Either a single e-mail address or an array of e-mail addresses.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>mixed</code>If $email is a single e-mail, returns the member id of the record matching that e-mail (or null if none can be found).
              If $email is an array of e-mail addresses, return an array of all matching member ids that can be found.
             Returns null on error.</div>
</div></div>
</div>
<a id="method_formatMemberInfo"></a><div class="element clickable method public method_formatMemberInfo" data-toggle="collapse" data-target=".method_formatMemberInfo .collapse" title="public">
<h2>Format member information into a nicer arrangement.</h2>
<pre>formatMemberInfo(array $memberInfo, bool $removeNullEntries) : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<table class="table table-bordered">
<tr>
<th>link</th>
<td><a href="Member::__getMemberSummary">Member::__getMemberSummary</a></td>
</tr>
<tr>
<th>link</th>
<td><a href="Member::getMemberDetails">Member::getMemberDetails</a></td>
</tr>
</table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$memberInfo</h4>
<code>array</code><p>The info to format, usually retrieved from Member::__getMemberSummary or Member::getMemberDetails.</p></div>
<div class="subelement argument">
<h4>$removeNullEntries</h4>
<code>bool</code><p>If true then entries that have a value of null, false or an empty array won't exist in the final array.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>array</code>An array of member information, formatted so that nothing needs to know database rows.</div>
</div></div>
</div>
<a id="method_formatMemberInfoList"></a><div class="element clickable method public method_formatMemberInfoList" data-toggle="collapse" data-target=".method_formatMemberInfoList .collapse" title="public">
<h2>Format an array of member infos.</h2>
<pre>formatMemberInfoList(array $memberInfoList, bool $removeNullEntries) : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$memberInfoList</h4>
<code>array</code><p>The array of member infos.</p></div>
<div class="subelement argument">
<h4>$removeNullEntries</h4>
<code>bool</code><p>If true then entries that have a value of null, false or an empty array won't exist in the final array.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>array</code>An array of formatted member infos.</div>
</div></div>
</div>
<a id="method_getApproveDetails"></a><div class="element clickable method public method_getApproveDetails" data-toggle="collapse" data-target=".method_getApproveDetails .collapse" title="public">
<h2>Get a members name, email and pin.</h2>
<pre>getApproveDetails(int $memberId) : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$memberId</h4>
<code>int</code><p>The id of the member to get the details for.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>mixed</code>Array of info on success, null on failure.</div>
</div></div>
</div>
<a id="method_getBestMemberNames"></a><div class="element clickable method public method_getBestMemberNames" data-toggle="collapse" data-target=".method_getBestMemberNames .collapse" title="public">
<h2>Get a list of member names or e-mails (if we don't have their name) for all members.</h2>
<pre>getBestMemberNames() : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Returns</h3>
<div class="subelement response">
<code>array</code>Array of member info, indexed by member id.</div>
</div></div>
</div>
<a id="method_getCount"></a><div class="element clickable method public method_getCount" data-toggle="collapse" data-target=".method_getCount .collapse" title="public">
<h2>Find out how many member records exist in the database.</h2>
<pre>getCount() : int</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Returns</h3>
<div class="subelement response">
<code>int</code>The number of member records in the database.</div>
</div></div>
</div>
<a id="method_getCountForStatus"></a><div class="element clickable method public method_getCountForStatus" data-toggle="collapse" data-target=".method_getCountForStatus .collapse" title="public">
<h2>Find how many members have a certain Status.</h2>
<pre>getCountForStatus(int $statusId) : int</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$statusId</h4>
<code>int</code><p>The id of the Status record to check.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>int</code>The number of member records that belong to the Status.</div>
</div></div>
</div>
<a id="method_getEmailForMember"></a><div class="element clickable method public method_getEmailForMember" data-toggle="collapse" data-target=".method_getEmailForMember .collapse" title="public">
<h2>Get the email for a member, may hit the database.</h2>
<pre>getEmailForMember(mixed $memberData) : int</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$memberData</h4>
<code>mixed</code><p>If array, assumed to be an array of member info in the same format that is returned from database queries, otherwise assumed to be a member id.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>int</code>The email for the member, or null if email could not be found.</div>
</div></div>
</div>
<a id="method_getEmailsForAllMembers"></a><div class="element clickable method public method_getEmailsForAllMembers" data-toggle="collapse" data-target=".method_getEmailsForAllMembers .collapse" title="public">
<h2>Get a list of e-mail addresses for all members.</h2>
<pre>getEmailsForAllMembers() : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Returns</h3>
<div class="subelement response">
<code>array</code>A list of member e-mails.</div>
</div></div>
</div>
<a id="method_getEmailsForMembersInGroup"></a><div class="element clickable method public method_getEmailsForMembersInGroup" data-toggle="collapse" data-target=".method_getEmailsForMembersInGroup .collapse" title="public">
<h2>Get a list of e-mail addresses for all members in a Group.</h2>
<pre>getEmailsForMembersInGroup(int $groupId) : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$groupId</h4>
<code>int</code><p>The id of the group the members must belong to.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>array</code>A list of member e-mails.</div>
</div></div>
</div>
<a id="method_getIdForMember"></a><div class="element clickable method public method_getIdForMember" data-toggle="collapse" data-target=".method_getIdForMember .collapse" title="public">
<h2>Get the Status for a member, may hit the database.</h2>
<pre>getIdForMember(mixed $memberData) : int</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$memberData</h4>
<code>mixed</code><p>If array, assumed to be an array of member info in the same format that is returned from database queries, otherwise assumed to be a member id.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>int</code>The status for the member, or 0 if status could not be found.</div>
</div></div>
</div>
<a id="method_getMailingList"></a><div class="element clickable method public method_getMailingList" data-toggle="collapse" data-target=".method_getMailingList .collapse" title="public">
<h2>Get a MailingList model.</h2>
<pre>getMailingList() : <a href="../classes/MailingList.html">\MailingList</a></pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Returns</h3>
<div class="subelement response">
<code><a href="../classes/MailingList.html">\MailingList</a></code>The MailingList model.</div>
</div></div>
</div>
<a id="method_getMemberSummaryAll"></a><div class="element clickable method public method_getMemberSummaryAll" data-toggle="collapse" data-target=".method_getMemberSummaryAll .collapse" title="public">
<h2>Get a summary of the member records for all members.</h2>
<pre>getMemberSummaryAll(mixed $paginate) : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<table class="table table-bordered"><tr>
<th>link</th>
<td><a href="Member::__getMemberSummary()">Member::__getMemberSummary()</a></td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$paginate</h4><p>If true, return a query to retrieve a page of the data, otherwise return the data.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>array</code>A summary of the data of all members.</div>
</div></div>
</div>
<a id="method_getMemberSummaryForAccountIds"></a><div class="element clickable method public method_getMemberSummaryForAccountIds" data-toggle="collapse" data-target=".method_getMemberSummaryForAccountIds .collapse" title="public">
<h2>Get a summary of the member records for all members with an account id that is in the list passed in.</h2>
<pre>getMemberSummaryForAccountIds(mixed $paginate, array $accountIds) : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<table class="table table-bordered"><tr>
<th>link</th>
<td><a href="Member::__getMemberSummary()">Member::__getMemberSummary()</a></td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$paginate</h4><p>If true, return a query to retrieve a page of the data, otherwise return the data.</p></div>
<div class="subelement argument">
<h4>$accountIds</h4>
<code>array</code><p>Retrieve information about members who have one of these account ids.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>array</code>A summary of the data of all members with those account ids.</div>
</div></div>
</div>
<a id="method_getMemberSummaryForMember"></a><div class="element clickable method public method_getMemberSummaryForMember" data-toggle="collapse" data-target=".method_getMemberSummaryForMember .collapse" title="public">
<h2>Get a summary of the member records for a specific member.</h2>
<pre>getMemberSummaryForMember(int $memberId, mixed $format<code> = true</code>) : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<table class="table table-bordered"><tr>
<th>link</th>
<td><a href="Member::__getMemberSummary()">Member::__getMemberSummary()</a></td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$memberId</h4>
<code>int</code><p>The id of the member to work with.</p></div>
<div class="subelement argument">
<h4>$format</h4><p>If true format the return data.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>array</code>A summary of the data for a specific member.</div>
</div></div>
</div>
<a id="method_getMemberSummaryForMembers"></a><div class="element clickable method public method_getMemberSummaryForMembers" data-toggle="collapse" data-target=".method_getMemberSummaryForMembers .collapse" title="public">
<h2>Get a summary of the member records for a list of members.</h2>
<pre>getMemberSummaryForMembers(array $memberIds, mixed $format<code> = true</code>) : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<table class="table table-bordered"><tr>
<th>link</th>
<td><a href="Member::__getMemberSummary()">Member::__getMemberSummary()</a></td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$memberIds</h4>
<code>array</code><p>The array of member ids to work with.</p></div>
<div class="subelement argument">
<h4>$format</h4><p>If true format the return data.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>array</code>A summary of the data for the members in the list</div>
</div></div>
</div>
<a id="method_getMemberSummaryForSearchQuery"></a><div class="element clickable method public method_getMemberSummaryForSearchQuery" data-toggle="collapse" data-target=".method_getMemberSummaryForSearchQuery .collapse" title="public">
<h2>Get a summary of the member records for all member records where their name, email or username is similar to the keyword.</h2>
<pre>getMemberSummaryForSearchQuery(mixed $paginate, string $keyword) : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<table class="table table-bordered"><tr>
<th>link</th>
<td><a href="Member::__getMemberSummary()">Member::__getMemberSummary()</a></td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$paginate</h4><p>If true, return a query to retrieve a page of the data, otherwise return the data.</p></div>
<div class="subelement argument">
<h4>$keyword</h4>
<code>string</code><p>Term to search for.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>array</code>A summary of the data of all members who match the query.</div>
</div></div>
</div>
<a id="method_getMemberSummaryForStatus"></a><div class="element clickable method public method_getMemberSummaryForStatus" data-toggle="collapse" data-target=".method_getMemberSummaryForStatus .collapse" title="public">
<h2>Get a summary of the member records for all members with a certain status.</h2>
<pre>getMemberSummaryForStatus(mixed $paginate, int $statusId) : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<table class="table table-bordered"><tr>
<th>link</th>
<td><a href="Member::__getMemberSummary()">Member::__getMemberSummary()</a></td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$paginate</h4><p>If true, return a query to retrieve a page of the data, otherwise return the data.</p></div>
<div class="subelement argument">
<h4>$statusId</h4>
<code>int</code><p>Retrieve information about members who have this status.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>array</code>A summary of the data of all members of a status.</div>
</div></div>
</div>
<a id="method_getReadableAccountList"></a><div class="element clickable method public method_getReadableAccountList" data-toggle="collapse" data-target=".method_getReadableAccountList .collapse" title="public">
<h2>Get a list of account and member details that is suitable for populating a drop-down box</h2>
<pre>getReadableAccountList() : null</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Returns</h3>
<div class="subelement response">
<code>null</code>List of values on success, null on failure.</div>
</div></div>
</div>
<a id="method_getSoDetails"></a><div class="element clickable method public method_getSoDetails" data-toggle="collapse" data-target=".method_getSoDetails .collapse" title="public">
<h2>Get a members name, email and payment ref.</h2>
<pre>getSoDetails(int $memberId) : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$memberId</h4>
<code>int</code><p>The id of the member to get the details for.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>mixed</code>Array of info on success, null on failure.</div>
</div></div>
</div>
<a id="method_getStatusForMember"></a><div class="element clickable method public method_getStatusForMember" data-toggle="collapse" data-target=".method_getStatusForMember .collapse" title="public">
<h2>Get the Status for a member, may hit the database.</h2>
<pre>getStatusForMember(mixed $memberData) : int</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$memberData</h4>
<code>mixed</code><p>If array, assumed to be an array of member info in the same format that is returned from database queries, otherwise assumed to be a member id.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>int</code>The status for the member, or 0 if status could not be found.</div>
</div></div>
</div>
<a id="method_getUsernameForMember"></a><div class="element clickable method public method_getUsernameForMember" data-toggle="collapse" data-target=".method_getUsernameForMember .collapse" title="public">
<h2>Get the username for a member, may hit the database.</h2>
<pre>getUsernameForMember(mixed $memberData) : int</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$memberData</h4>
<code>mixed</code><p>If array, assumed to be an array of member info in the same format that is returned from database queries, otherwise assumed to be a member id.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>int</code>The username for the member, or 0 if username could not be found.</div>
</div></div>
</div>
<a id="method_passwordConfirmMatchesPassword"></a><div class="element clickable method public method_passwordConfirmMatchesPassword" data-toggle="collapse" data-target=".method_passwordConfirmMatchesPassword .collapse" title="public">
<h2>Validation function to see if the user-supplied password and password confirmation match.</h2>
<pre>passwordConfirmMatchesPassword(array $check) : bool</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$check</h4>
<code>array</code><p>The password to be validated.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>bool</code>True if the supplied password values match, otherwise false.</div>
</div></div>
</div>
<a id="method_registerMember"></a><div class="element clickable method public method_registerMember" data-toggle="collapse" data-target=".method_registerMember .collapse" title="public">
<h2>Attempt to register a new member record.</h2>
<pre>registerMember(array $data) : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$data</h4>
<code>array</code><p>Information to use to create the new member record.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>mixed</code>Array of details if the member record was created or didn't need to be, or null if member record could not be created.</div>
</div></div>
</div>
<a id="method_reinstateMembership"></a><div class="element clickable method public method_reinstateMembership" data-toggle="collapse" data-target=".method_reinstateMembership .collapse" title="public">
<h2>Reinstate an ex-members membership.</h2>
<pre>reinstateMembership(int $memberId, int $adminId) : bool</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$memberId</h4>
<code>int</code><p>The id of the membership to reinstate.</p></div>
<div class="subelement argument">
<h4>$adminId</h4>
<code>int</code><p>The id of the member doing the reinstating.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>bool</code>True if membership was reinstated, false otherwise.</div>
</div></div>
</div>
<a id="method_rejectDetails"></a><div class="element clickable method public method_rejectDetails" data-toggle="collapse" data-target=".method_rejectDetails .collapse" title="public">
<h2>Mark a members contact details as invalid.</h2>
<pre>rejectDetails(int $memberId, array $data, int $adminId) : bool</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$memberId</h4>
<code>int</code><p>The id of the member.</p></div>
<div class="subelement argument">
<h4>$data</h4>
<code>array</code><p>The data to use.</p></div>
<div class="subelement argument">
<h4>$adminId</h4>
<code>int</code><p>The id of the member admin who is rejecting the details.</p></div>
<h3>Exceptions</h3>
<table class="table table-bordered"><tr>
<th><code><a href="../classes/InvalidStatusException.html">\InvalidStatusException</a></code></th>
<td>if the member is not a pre-member stage 2.</td>
</tr></table>
<h3>Returns</h3>
<div class="subelement response">
<code>bool</code>True if the members data was altered successfully, false otherwise.</div>
</div></div>
</div>
<a id="method_removeEmailMustMatch"></a><div class="element clickable method public method_removeEmailMustMatch" data-toggle="collapse" data-target=".method_removeEmailMustMatch .collapse" title="public">
<h2>Remove the 'e-mail must match' validation rule.</h2>
<pre>removeEmailMustMatch() </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<table class="table table-bordered">
<tr>
<th>link</th>
<td><a href="Member::checkEmailMatch()">Member::checkEmailMatch()</a></td>
</tr>
<tr>
<th>link</th>
<td><a href="Member::addEmailMustMatch()">Member::addEmailMustMatch()</a></td>
</tr>
</table>
</div></div>
</div>
<a id="method_revokeMembership"></a><div class="element clickable method public method_revokeMembership" data-toggle="collapse" data-target=".method_revokeMembership .collapse" title="public">
<h2>Revoke a members membership.</h2>
<pre>revokeMembership(int $memberId, int $adminId) : bool</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$memberId</h4>
<code>int</code><p>The id of the membership to revoke.</p></div>
<div class="subelement argument">
<h4>$adminId</h4>
<code>int</code><p>The id of the member doing the revoking.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>bool</code>True if membership was revoked, false otherwise.</div>
</div></div>
</div>
<a id="method_sanitiseMemberInfo"></a><div class="element clickable method public method_sanitiseMemberInfo" data-toggle="collapse" data-target=".method_sanitiseMemberInfo .collapse" title="public">
<h2>Sanitise an array of member info, removing certain fields.</h2>
<pre>sanitiseMemberInfo(array $memberInfo, bool $showAdminFeatures, bool $showFinances, bool $hasJoined, bool $showAccount, bool $showStatus, bool $showPersonalDetails) : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$memberInfo</h4>
<code>array</code><p>The array of member info to sanitise.</p></div>
<div class="subelement argument">
<h4>$showAdminFeatures</h4>
<code>bool</code><p>If true then all data should be shown.</p></div>
<div class="subelement argument">
<h4>$showFinances</h4>
<code>bool</code><p>If true then finance data should be shown.</p></div>
<div class="subelement argument">
<h4>$hasJoined</h4>
<code>bool</code><p>If true then show data that is only relevant to members who have joined.</p></div>
<div class="subelement argument">
<h4>$showAccount</h4>
<code>bool</code><p>If true then show account info.</p></div>
<div class="subelement argument">
<h4>$showStatus</h4>
<code>bool</code><p>If true then show member status.</p></div>
<div class="subelement argument">
<h4>$showPersonalDetails</h4>
<code>bool</code><p>If true then show member personal details.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>mixed</code>The array of sanitised member info, or false on error.</div>
</div></div>
</div>
<a id="method_setupDetails"></a><div class="element clickable method public method_setupDetails" data-toggle="collapse" data-target=".method_setupDetails .collapse" title="public">
<h2>Attempt to set-up contact details for a member.</h2>
<pre>setupDetails(int $memberId, array $data) : bool</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$memberId</h4>
<code>int</code><p>The id of the member to set-up the contact details for.</p></div>
<div class="subelement argument">
<h4>$data</h4>
<code>array</code><p>The data to use.</p></div>
<h3>Exceptions</h3>
<table class="table table-bordered"><tr>
<th><code><a href="../classes/InvalidStatusException.html">\InvalidStatusException</a></code></th>
<td>if the member is not a pre-member stage 1.</td>
</tr></table>
<h3>Returns</h3>
<div class="subelement response">
<code>bool</code>True on success, otherwise false.</div>
</div></div>
</div>
<a id="method_setupLogin"></a><div class="element clickable method public method_setupLogin" data-toggle="collapse" data-target=".method_setupLogin .collapse" title="public">
<h2>Attempt to set-up login details for a member.</h2>
<pre>setupLogin(int $memberId, array $data) : bool</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$memberId</h4>
<code>int</code><p>The id of the member to set-up the login details for.</p></div>
<div class="subelement argument">
<h4>$data</h4>
<code>array</code><p>The data to use.</p></div>
<h3>Exceptions</h3>
<table class="table table-bordered"><tr>
<th><code><a href="../classes/InvalidStatusException.html">\InvalidStatusException</a></code></th>
<td>if the member is not a prospective member.</td>
</tr></table>
<h3>Returns</h3>
<div class="subelement response">
<code>bool</code>True on success, otherwise false.</div>
</div></div>
</div>
<a id="method_updateDetails"></a><div class="element clickable method public method_updateDetails" data-toggle="collapse" data-target=".method_updateDetails .collapse" title="public">
<h2>Update all the updatable info for a member.</h2>
<pre>updateDetails(int $memberId, array $data, int $adminId) : bool</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$memberId</h4>
<code>int</code><p>The id of the member to update.</p></div>
<div class="subelement argument">
<h4>$data</h4>
<code>array</code><p>The array of new data.</p></div>
<div class="subelement argument">
<h4>$adminId</h4>
<code>int</code><p>The id of the member who is updating the details.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>bool</code>True if member details were updated ok, false otherwise.</div>
</div></div>
</div>
<a id="method_validateEmail"></a><div class="element clickable method public method_validateEmail" data-toggle="collapse" data-target=".method_validateEmail .collapse" title="public">
<h2>Validate that e-mail data is ok.</h2>
<pre>validateEmail(array $data) : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$data</h4>
<code>array</code><p>The data to validate.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>mixed</code>Array of e-mail data if $data is valid, false otherwise.</div>
</div></div>
</div>
<a id="method___getMemberSummary"></a><div class="element clickable method private method___getMemberSummary" data-toggle="collapse" data-target=".method___getMemberSummary .collapse" title="private">
<h2>Get a summary of the member records for all members that match the conditions.</h2>
<pre>__getMemberSummary(bool $paginate, array $conditions<code> = array()</code>, bool $format<code> = true</code>) : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$paginate</h4>
<code>bool</code><p>If true, just return the query for pagination instead of the data.</p></div>
<div class="subelement argument">
<h4>$conditions</h4>
<code>array</code><p>An array of conditions to decide which member records to access.</p></div>
<div class="subelement argument">
<h4>$format</h4>
<code>bool</code><p>If true format the data first, otherwise just return it in the same format as the datasource gives it us.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>array</code>A summary (id, name, email, Status and Groups) of the data of all members that match the conditions.</div>
</div></div>
</div>
<a id="method___saveMemberData"></a><div class="element clickable method private method___saveMemberData" data-toggle="collapse" data-target=".method___saveMemberData .collapse" title="private">
<h2>Create or save a member record, and all associated data.</h2>
<pre>__saveMemberData(array $memberInfo, array $fields, int $adminId) : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$memberInfo</h4>
<code>array</code><p>The information to use to create or update the member record.</p></div>
<div class="subelement argument">
<h4>$fields</h4>
<code>array</code><p>The fields that should be saved.</p></div>
<div class="subelement argument">
<h4>$adminId</h4>
<code>int</code><p>The id of the member who is making the change that needs saving.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>mixed</code>Array of result data if save succeed, false otherwise.</div>
</div></div>
</div>
<a id="method___setMemberStatus"></a><div class="element clickable method private method___setMemberStatus" data-toggle="collapse" data-target=".method___setMemberStatus .collapse" title="private">
<h2>Set a members member_status.</h2>
<pre>__setMemberStatus(int $memberId, int $adminId, int $newStatus, int $requiredCurrentStatus) : bool</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$memberId</h4>
<code>int</code><p>The id of the member to change the status of.</p></div>
<div class="subelement argument">
<h4>$adminId</h4>
<code>int</code><p>The id of the member doing then changing.</p></div>
<div class="subelement argument">
<h4>$newStatus</h4>
<code>int</code><p>The new member_status.</p></div>
<div class="subelement argument">
<h4>$requiredCurrentStatus</h4>
<code>int</code><p>The status the member must currently have.</p></div>
<h3>Exceptions</h3>
<table class="table table-bordered">
<tr>
<th><code><a href="../classes/InvalidStatusException.html">\InvalidStatusException</a></code></th>
<td>if the members status does not match $requiredCurrentStatus.</td>
</tr>
<tr>
<th><code><a href="../classes/NotAuthorizedException.html">\NotAuthorizedException</a></code></th>
<td>if the member specified by $adminId doesn't have permission to do this.</td>
</tr>
</table>
<h3>Returns</h3>
<div class="subelement response">
<code>bool</code>True if status was set, otherwise false.</div>
</div></div>
</div>
<a id="method___setPassword"></a><div class="element clickable method private method___setPassword" data-toggle="collapse" data-target=".method___setPassword .collapse" title="private">
<h2>Set the password for the member, with the option to create a new password entry if needed.</h2>
<pre>__setPassword(string $username, string $password, bool $allowCreate) : bool</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$username</h4>
<code>string</code><p>The username of the member.</p></div>
<div class="subelement argument">
<h4>$password</h4>
<code>string</code><p>The new password.</p></div>
<div class="subelement argument">
<h4>$allowCreate</h4>
<code>bool</code><p>If true, will create a new auth record for a member that doesn't currently have one.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>bool</code>True if the password was set ok, false otherwise.</div>
</div></div>
</div>
<h3>
<i title="Properties" class="icon-custom icon-property"></i> Properties</h3>
<a id="property_actsAs"> </a><div class="element clickable property public property_actsAs" data-toggle="collapse" data-target=".property_actsAs .collapse" title="public">
<h2>Specify the behavors we implement</h2>
<pre>$actsAs : array</pre>
<div class="row collapse"><div class="detail-description">
<h3>Default</h3>
<div class="subelement argument"><code>array('KrbAuth')</code></div>
</div></div>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_belongsTo"> </a><div class="element clickable property public property_belongsTo" data-toggle="collapse" data-target=".property_belongsTo .collapse" title="public">
<h2>Specify our 'belongs to' associations</h2>
<pre>$belongsTo : array</pre>
<div class="row collapse"><div class="detail-description">
<h3>Default</h3>
<div class="subelement argument"><code>array('Status' => array('className' => 'Status', 'foreignKey' => 'member_status', 'type' => 'inner'), 'Account' => array('className' => 'Account', 'foreignKey' => 'account_id'))</code></div>
</div></div>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_hasAndBelongsToMany"> </a><div class="element clickable property public property_hasAndBelongsToMany" data-toggle="collapse" data-target=".property_hasAndBelongsToMany .collapse" title="public">
<h2>Has and belongs to many (HABTM) associations</h2>
<pre>$hasAndBelongsToMany : array</pre>
<div class="row collapse"><div class="detail-description">
<h3>Default</h3>
<div class="subelement argument"><code>array('Group' => array('className' => 'Group', 'joinTable' => 'member_group', 'foreignKey' => 'member_id', 'associationForeignKey' => 'grp_id', 'unique' => true, 'with' => 'GroupsMember'))</code></div>
</div></div>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_hasMany"> </a><div class="element clickable property public property_hasMany" data-toggle="collapse" data-target=".property_hasMany .collapse" title="public">
<h2>Specify our 'has many' associations</h2>
<pre>$hasMany : array</pre>
<div class="row collapse"><div class="detail-description">
<h3>Default</h3>
<div class="subelement argument"><code>array('StatusUpdate' => array('order' => 'StatusUpdate.timestamp DESC', 'limit' => '1'), 'Pin' => array('className' => 'Pin'))</code></div>
</div></div>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_mailingList"> </a><div class="element clickable property public property_mailingList" data-toggle="collapse" data-target=".property_mailingList .collapse" title="public">
<h2>MailingList object, for easy mocking</h2>
<pre>$mailingList : <a href="../classes/MailingList.html">\MailingList</a></pre>
<div class="row collapse"><div class="detail-description">
<h3>Default</h3>
<div class="subelement argument"><code>null</code></div>
</div></div>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_primaryKey"> </a><div class="element clickable property public property_primaryKey" data-toggle="collapse" data-target=".property_primaryKey .collapse" title="public">
<h2>Specify the primary key.</h2>
<pre>$primaryKey : string</pre>
<div class="row collapse"><div class="detail-description">
<h3>Default</h3>
<div class="subelement argument"><code>'member_id'</code></div>
</div></div>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_validate"> </a><div class="element clickable property public property_validate" data-toggle="collapse" data-target=".property_validate .collapse" title="public">
<h2>Validation rules.</h2>
<pre>$validate : array</pre>
<div class="row collapse"><div class="detail-description">
<h3>Default</h3>
<div class="subelement argument"><code>array('firstname' => array('length' => array('rule' => array('between', 1, 100), 'message' => 'Firstname must be between 1 and 100 characters long')), 'surname' => array('length' => array('rule' => array('between', 1, 100), 'message' => 'Surname must be between 1 and 100 characters long')), 'email' => array('length' => array('rule' => array('between', 1, 100), 'required' => true, 'message' => 'Firstname must be between 1 and 100 characters long'), 'content' => array('rule' => 'email')), 'password' => array('noEmpty' => array('rule' => 'notEmpty', 'message' => 'This field cannot be left blank'), 'minLen' => array('rule' => array('minLength', self::MIN_PASSWORD_LENGTH), 'message' => 'Password too short')), 'password_confirm' => array('noEmpty' => array('rule' => 'notEmpty', 'message' => 'This field cannot be left blank'), 'minLen' => array('rule' => array('minLength', self::MIN_PASSWORD_LENGTH), 'message' => 'Password too short'), 'matchNewPassword' => array('rule' => array('passwordConfirmMatchesPassword'), 'message' => 'Passwords don\'t match')), 'username' => array('noEmpty' => array('rule' => 'notEmpty', 'message' => 'This field cannot be left blank'), 'mustbeUnique' => array('rule' => array('checkUniqueUsername'), 'message' => 'That username is already taken'), 'alphaNumeric' => array('rule' => 'alphaNumeric', 'message' => 'Aplha-numeric characters only'), 'between' => array('rule' => array('between', 3, 50), 'message' => 'Username must be between 3 to 50 characters long')), 'unlock_text' => array('length' => array('rule' => array('between', 1, 95), 'message' => 'Unlock text must be between 1 and 95 characters long')), 'usernameOrEmail' => array('notEmpty'), 'account_id' => array('length' => array('rule' => array('between', 1, 11), 'message' => 'Account id must be between 1 and 12 characters long'), 'content' => array('rule' => 'numeric', 'message' => 'Account id must be a number')), 'member_status' => array('rule' => array('inList', array(\Status::PROSPECTIVE_MEMBER, \Status::PRE_MEMBER_1, \Status::PRE_MEMBER_2, \Status::PRE_MEMBER_3, \Status::CURRENT_MEMBER, \Status::EX_MEMBER))), 'address_1' => array('length' => array('rule' => array('between', 1, 100), 'message' => 'Address must be between 1 and 100 characters long')), 'address_2' => array('foo' => array('rule' => array('maxLength', 100), 'required' => false, 'allowEmpty' => true, 'message' => 'Address must be no more than 100 characters long')), 'address_city' => array('length' => array('rule' => array('between', 1, 100), 'message' => 'City must be between 1 and 100 characters long')), 'address_postcode' => array('length' => array('rule' => array('between', 1, 100), 'message' => 'Postcode must be between 1 and 100 characters long')), 'contact_number' => array('length' => array('rule' => array('between', 1, 20), 'message' => 'Contact number must be between 1 and 20 characters long')))</code></div>
</div></div>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<h3>
<i title="Constants" class="icon-custom icon-constant"></i> Constants</h3>
<a id="constant_INITAL_CREDIT_LIMIT"> </a><div class="element clickable constant  constant_INITAL_CREDIT_LIMIT" data-toggle="collapse" data-target=".constant_INITAL_CREDIT_LIMIT .collapse" title="">
<h2>Initial credit limit, in pence.</h2>
<pre>INITAL_CREDIT_LIMIT = 2000 </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="constant_MIN_PASSWORD_LENGTH"> </a><div class="element clickable constant  constant_MIN_PASSWORD_LENGTH" data-toggle="collapse" data-target=".constant_MIN_PASSWORD_LENGTH .collapse" title="">
<h2>The minimum length passwords must be.</h2>
<pre>MIN_PASSWORD_LENGTH = 6 </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
</div>
</div>
</div>
</div>
<div class="row"><footer class="span12">
            Template is built using <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap 2</a> and icons provided by <a href="http://glyphicons.com/">Glyphicons</a>.<br>
            Documentation is powered by <a href="http://www.phpdoc.org/">phpDocumentor 2.2.0
</a> and<br>
            generated on 2013-12-14T13:33:57Z.<br></footer></div>
</div>
</body>
</html>
